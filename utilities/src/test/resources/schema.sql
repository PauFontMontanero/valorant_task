-- PHPMYADMIN SQL DUMP
-- VERSION 5.0.1
-- HTTPS://WWW.PHPMYADMIN.NET/
--
-- HOST: 127.0.0.1
-- GENERATION TIME: MAR 24, 2020 AT 06:55 PM
-- SERVER VERSION: 10.4.11-MARIADB
-- PHP VERSION: 7.4.3
DROP DATABASE IF EXISTS BANDHUB;

CREATE DATABASE BANDHUB;

USE BANDHUB;

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET TIME_ZONE = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES UTF8MB4 */;

--
-- DATABASE: `BANDHUB`
--

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `AUTHOR`
--

CREATE TABLE `AUTHOR` (
  `ID` INT(11) NOT NULL,
  `NAME` VARCHAR(50) DEFAULT NULL,
  `NICKNAME` VARCHAR(50) DEFAULT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `BAND`
--

CREATE TABLE `BAND` (
  `ID` INT(11) NOT NULL,
  `NAME` VARCHAR(100) NOT NULL,
  `FOUNDED_ON` DATETIME NOT NULL,
  `ACTIVE` TINYINT(1) NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `BAND_EVENT`
--

CREATE TABLE `BAND_EVENT` (
  `EVENT` INT(11) NOT NULL,
  `BAND` INT(11) NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `BAND_MUSICAL_GENRE`
--

CREATE TABLE `BAND_MUSICAL_GENRE` (
  `BAND` INT(11) NOT NULL,
  `MUSICAL_GENRE` INT(11) NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `BAND_MUSICIAN`
--

CREATE TABLE `BAND_MUSICIAN` (
  `BAND` INT(11) NOT NULL,
  `MUSICIAN` INT(11) NOT NULL,
  `SINCE` DATETIME NOT NULL,
  `TO` DATETIME DEFAULT NULL,
  `ACTIVE` TINYINT(1) DEFAULT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `BAND_POST`
--

CREATE TABLE `BAND_POST` (
  `ID` INT(11) NOT NULL,
  `BAND` INT(11) DEFAULT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `ENVENT_TYPE`
--

CREATE TABLE `ENVENT_TYPE` (
  `ID` INT(11) NOT NULL,
  `DESCRIPTION` VARCHAR(100) DEFAULT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `EVENT`
--

CREATE TABLE `EVENT` (
  `ID` INT(11) NOT NULL,
  `TYPE` INT(11) NOT NULL,
  `NAME` LONGTEXT NOT NULL,
  `START` DATETIME NOT NULL,
  `END` DATETIME DEFAULT NULL,
  `PLACE` INT(11) DEFAULT NULL,
  `DESCRIPTION` LONGTEXT DEFAULT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `EVENT_POST`
--

CREATE TABLE `EVENT_POST` (
  `ID` INT(11) NOT NULL,
  `EVENT` INT(11) NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `GENRE`
--

CREATE TABLE `GENRE` (
  `ID` SMALLINT(6) NOT NULL,
  `DESCRIPTION` VARCHAR(50) NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `INSTRUMENT`
--

CREATE TABLE `INSTRUMENT` (
  `ID` INT(11) NOT NULL,
  `DESCRIPTION` VARCHAR(100) NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `MUSICAL_GENRE`
--

CREATE TABLE `MUSICAL_GENRE` (
  `ID` INT(11) NOT NULL,
  `NAME` VARCHAR(50) NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `MUSICIAN`
--

CREATE TABLE `MUSICIAN` (
  `ID` INT(11) NOT NULL,
  `FIRSTNAME` VARCHAR(100) NOT NULL,
  `LASTNAME` VARCHAR(100) NOT NULL,
  `GENRE` SMALLINT(6) NOT NULL,
  `BORNON` DATETIME NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `MUSICIAN_INSTRUMENT`
--

CREATE TABLE `MUSICIAN_INSTRUMENT` (
  `MUSICIAN` INT(11) NOT NULL,
  `INSTRUMENT` INT(11) NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `MUSICIAN_MUSICAL_GENRE`
--

CREATE TABLE `MUSICIAN_MUSICAL_GENRE` (
  `MUSICIAN` INT(11) NOT NULL,
  `MUSICAL_GENRE` INT(11) NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

-- --------------------------------------------------------

--
-- TABLE STRUCTURE FOR TABLE `POST`
--

CREATE TABLE `POST` (
  `ID` INT(11) NOT NULL,
  `AUTHOR` INT(11) NOT NULL,
  `CONTENT` LONGTEXT NOT NULL,
  `LIKES` INT(11) NOT NULL DEFAULT 0,
  `PUPLISHED_ON` DATETIME NOT NULL
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

--
-- INDEXES FOR DUMPED TABLES
--

--
-- INDEXES FOR TABLE `AUTHOR`
--
ALTER TABLE `AUTHOR`
  ADD PRIMARY KEY (`ID`);

--
-- INDEXES FOR TABLE `BAND`
--
ALTER TABLE `BAND`
  ADD PRIMARY KEY (`ID`);

--
-- INDEXES FOR TABLE `BAND_EVENT`
--
ALTER TABLE `BAND_EVENT`
  ADD PRIMARY KEY (`EVENT`,`BAND`),
  ADD KEY `FK_BAND_EVENT_BAND` (`BAND`);

--
-- INDEXES FOR TABLE `BAND_MUSICAL_GENRE`
--
ALTER TABLE `BAND_MUSICAL_GENRE`
  ADD PRIMARY KEY (`BAND`,`MUSICAL_GENRE`),
  ADD KEY `FK_BAND_MUSICAL_GENRE_MUSICAL_GENRE` (`MUSICAL_GENRE`);

--
-- INDEXES FOR TABLE `BAND_MUSICIAN`
--
ALTER TABLE `BAND_MUSICIAN`
  ADD PRIMARY KEY (`BAND`,`MUSICIAN`),
  ADD KEY `FK_BAND_MUSICIAN_MUSICIAN` (`MUSICIAN`);

--
-- INDEXES FOR TABLE `BAND_POST`
--
ALTER TABLE `BAND_POST`
  ADD PRIMARY KEY (`ID`),
  ADD KEY `FK_BAND_POST_BAND` (`BAND`);

--
-- INDEXES FOR TABLE `ENVENT_TYPE`
--
ALTER TABLE `ENVENT_TYPE`
  ADD PRIMARY KEY (`ID`);

--
-- INDEXES FOR TABLE `EVENT`
--
ALTER TABLE `EVENT`
  ADD PRIMARY KEY (`ID`);

--
-- INDEXES FOR TABLE `EVENT_POST`
--
ALTER TABLE `EVENT_POST`
  ADD PRIMARY KEY (`ID`);

--
-- INDEXES FOR TABLE `GENRE`
--
ALTER TABLE `GENRE`
  ADD PRIMARY KEY (`ID`);

--
-- INDEXES FOR TABLE `INSTRUMENT`
--
ALTER TABLE `INSTRUMENT`
  ADD PRIMARY KEY (`ID`);

--
-- INDEXES FOR TABLE `MUSICAL_GENRE`
--
ALTER TABLE `MUSICAL_GENRE`
  ADD PRIMARY KEY (`ID`);

--
-- INDEXES FOR TABLE `MUSICIAN`
--
ALTER TABLE `MUSICIAN`
  ADD PRIMARY KEY (`ID`),
  ADD KEY `FK_MUSICIAN_BAND_MUSICIAN` (`GENRE`);

--
-- INDEXES FOR TABLE `MUSICIAN_INSTRUMENT`
--
ALTER TABLE `MUSICIAN_INSTRUMENT`
  ADD PRIMARY KEY (`MUSICIAN`,`INSTRUMENT`),
  ADD KEY `FK_MUSICIAN_INSTRUMENT_INSTRUMENT` (`INSTRUMENT`);

--
-- INDEXES FOR TABLE `MUSICIAN_MUSICAL_GENRE`
--
ALTER TABLE `MUSICIAN_MUSICAL_GENRE`
  ADD PRIMARY KEY (`MUSICIAN`,`MUSICAL_GENRE`),
  ADD KEY `FK_MUSICIAN_MUSICAL_GENRE_MUSICAL_GENRE` (`MUSICAL_GENRE`);

--
-- INDEXES FOR TABLE `POST`
--
ALTER TABLE `POST`
  ADD PRIMARY KEY (`ID`);

--
-- AUTO_INCREMENT FOR DUMPED TABLES
--

--
-- AUTO_INCREMENT FOR TABLE `AUTHOR`
--
ALTER TABLE `AUTHOR`
  MODIFY `ID` INT(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT FOR TABLE `ENVENT_TYPE`
--
ALTER TABLE `ENVENT_TYPE`
  MODIFY `ID` INT(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT FOR TABLE `EVENT`
--
ALTER TABLE `EVENT`
  MODIFY `ID` INT(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT FOR TABLE `GENRE`
--
ALTER TABLE `GENRE`
  MODIFY `ID` SMALLINT(6) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT FOR TABLE `MUSICAL_GENRE`
--
ALTER TABLE `MUSICAL_GENRE`
  MODIFY `ID` INT(11) NOT NULL AUTO_INCREMENT;

--
-- CONSTRAINTS FOR DUMPED TABLES
--

--
-- CONSTRAINTS FOR TABLE `BAND_EVENT`
--
ALTER TABLE `BAND_EVENT`
  ADD CONSTRAINT `FK_BAND_EVENT_BAND` FOREIGN KEY (`BAND`) REFERENCES `BAND` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `FK_BAND_EVENT_EVENT` FOREIGN KEY (`EVENT`) REFERENCES `EVENT` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- CONSTRAINTS FOR TABLE `BAND_MUSICAL_GENRE`
--
ALTER TABLE `BAND_MUSICAL_GENRE`
  ADD CONSTRAINT `FK_BAND_MUSICAL_GENRE_BAND` FOREIGN KEY (`BAND`) REFERENCES `BAND` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `FK_BAND_MUSICAL_GENRE_MUSICAL_GENRE` FOREIGN KEY (`MUSICAL_GENRE`) REFERENCES `MUSICAL_GENRE` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- CONSTRAINTS FOR TABLE `BAND_MUSICIAN`
--
ALTER TABLE `BAND_MUSICIAN`
  ADD CONSTRAINT `FK_BAND_MUSICIAN_BAND` FOREIGN KEY (`BAND`) REFERENCES `BAND` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `FK_BAND_MUSICIAN_MUSICIAN` FOREIGN KEY (`MUSICIAN`) REFERENCES `MUSICIAN` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- CONSTRAINTS FOR TABLE `BAND_POST`
--
ALTER TABLE `BAND_POST`
  ADD CONSTRAINT `FK_BAND_POST_BAND` FOREIGN KEY (`BAND`) REFERENCES `BAND` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `FK_BAND_POST_POST` FOREIGN KEY (`ID`) REFERENCES `POST` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- CONSTRAINTS FOR TABLE `EVENT`
--
ALTER TABLE `EVENT`
  ADD CONSTRAINT `FK_EVENT_ENVENT_TYPE` FOREIGN KEY (`ID`) REFERENCES `ENVENT_TYPE` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- CONSTRAINTS FOR TABLE `EVENT_POST`
--
ALTER TABLE `EVENT_POST`
  ADD CONSTRAINT `FK_EVENT_POST_POST` FOREIGN KEY (`ID`) REFERENCES `POST` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- CONSTRAINTS FOR TABLE `MUSICIAN`
--
ALTER TABLE `MUSICIAN`
  ADD CONSTRAINT `FK_MUSICIAN_BAND_MUSICIAN` FOREIGN KEY (`GENRE`) REFERENCES `GENRE` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- CONSTRAINTS FOR TABLE `MUSICIAN_INSTRUMENT`
--
ALTER TABLE `MUSICIAN_INSTRUMENT`
  ADD CONSTRAINT `FK_MUSICIAN_INSTRUMENT_INSTRUMENT` FOREIGN KEY (`INSTRUMENT`) REFERENCES `INSTRUMENT` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `FK_MUSICIAN_INSTRUMENT_MUSICIAN` FOREIGN KEY (`MUSICIAN`) REFERENCES `MUSICIAN` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- CONSTRAINTS FOR TABLE `MUSICIAN_MUSICAL_GENRE`
--
ALTER TABLE `MUSICIAN_MUSICAL_GENRE`
  ADD CONSTRAINT `FK_MUSICIAN_MUSICAL_GENRE_MUSICAL_GENRE` FOREIGN KEY (`MUSICAL_GENRE`) REFERENCES `MUSICAL_GENRE` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `FK_MUSICIAN_MUSICAL_GENRE_MUSICIAN` FOREIGN KEY (`MUSICIAN`) REFERENCES `MUSICIAN` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- CONSTRAINTS FOR TABLE `POST`
--
ALTER TABLE `POST`
  ADD CONSTRAINT `FK_POST_AUTHOR` FOREIGN KEY (`ID`) REFERENCES `AUTHOR` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
